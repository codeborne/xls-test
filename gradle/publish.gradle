jar {
  manifest {
    attributes(
      "Automatic-Module-Name": project.group + '.' + project.name.replace('-', '.'),
      "Implementation-Title": project.group + '.' + project.name,
      "Implementation-Version": archiveVersion,
      "Implementation-Vendor": "Codeborne")
  }
}

task sourcesJar(type: Jar) {
  archiveClassifier = 'sources'
  from sourceSets.main.allJava
}

javadoc {
  options.encoding = 'UTF-8'
  failOnError = false
}

task javadocJar(type: Jar, dependsOn: javadoc) {
  archiveClassifier = 'javadoc'
  from javadoc.destinationDir
}

if (project.hasProperty("signing.keyId")) {
  mavenPublishing {
    pom {
      name = "xls-test"
      description = "XLS Test: Excel testing library"
      inceptionYear = "2015"
      url = "https://github.com/codeborne/xls-test"
      licenses {
        license {
          name = "MIT"
          url = "https://opensource.org/licenses/MIT"
          distribution = "https://opensource.org/licenses/MIT"
        }
      }
      developers {
        developer {
          id = 'asolntsev'
          name = 'Andrei Solntsev'
          url = "https://github.com/asolntsev/"
        }
      }
      scm {
        url = "https://github.com/codeborne/xls-test"
        connection = "scm:git:git://github.com/codeborne/xls-test.git"
        developerConnection = "scm:git:ssh://git@github.com/codeborne/xls-test.git"
      }
    }
  }
}
